
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>為 Hexo 靜態博客添加夜間模式 › 牙子集</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言這兩天重新拾起博客，本來說是想改用劉曉義的系統的，可瞅一眼覺得 element 主題還是很有設計感，乾脆又折騰起了主題，並震驚地發現本以為棄坑的原主題作者 Art Chen 在 2020 年竟然更新了暗黑模式，自己也覺得總白一片在黑夜中確實不太好，就打算搭載上夜間模式。本站的夜間模式隨時間改變，並且可在右上角切換。 本文以此為契機，簡述為 Hexo 靜態博客添加夜間模式的通用指南。本文要求讀者">
<meta property="og:type" content="article">
<meta property="og:title" content="為 Hexo 靜態博客添加夜間模式">
<meta property="og:url" content="https://inchei.github.io/2022/07/16/dark-mode/index.html">
<meta property="og:site_name" content="牙子集">
<meta property="og:description" content="前言這兩天重新拾起博客，本來說是想改用劉曉義的系統的，可瞅一眼覺得 element 主題還是很有設計感，乾脆又折騰起了主題，並震驚地發現本以為棄坑的原主題作者 Art Chen 在 2020 年竟然更新了暗黑模式，自己也覺得總白一片在黑夜中確實不太好，就打算搭載上夜間模式。本站的夜間模式隨時間改變，並且可在右上角切換。 本文以此為契機，簡述為 Hexo 靜態博客添加夜間模式的通用指南。本文要求讀者">
<meta property="article:published_time" content="2022-07-15T16:00:00.000Z">
<meta property="article:modified_time" content="2023-02-02T16:00:00.000Z">
<meta property="article:author" content="茵陳">
<meta property="article:tag" content="瞎折騰">
<meta property="article:tag" content="網站">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/blog/favicon.png">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora:ital@1&family=Noto+Serif+SC:wght@200&family=Noto+Serif+TC:wght@200&display=swap" rel="stylesheet">
<!--<script type="text/javascript">
	var isSupportFontFamily=function(f){if(typeof f!="string"){return false}var h="Arial";if(f.toLowerCase()==h.toLowerCase()){return true}var e="a";var d=100;var a=100,i=100;var c=document.createElement("canvas");var b=c.getContext("2d");c.width=a;c.height=i;b.textAlign="center";b.fillStyle="black";b.textBaseline="middle";var g=function(j){b.clearRect(0,0,a,i);b.font=d+"px "+j+", "+h;b.fillText(e,a/2,i/2);var k=b.getImageData(0,0,a,i).data;return[].slice.call(k).filter(function(l){return l!=0})};return g(h).join("")!==g(f).join("")};
   if (!isSupportFontFamily('楷体') && !isSupportFontFamily('楷體')) {
	console.log('No kai. Webfont loading...');
	var fontscript = document.createElement('script');
	fontscript.setAttribute('src', 'https://cdn.repository.webfont.com/wwwroot/js/wf/youziku.api.min.js');
	fontscript.setAttribute('type', 'text/javascript');
	document.getElementsByTagName('head')[0].appendChild(fontscript);
	$youziku.load("blockquote, .article-meta, .post-meta", "cc63d89e0cf94db19a29b81481385940", "HanWangKaiMedium");
   $youziku.draw();
   } else {
	console.log('There is Kai.')
   }
</script>-->
  
  <!-- If needed, replace your own web font service -->
  
  

<!--
  
<link rel="stylesheet" href="/blog/icomoon/style.css">
-->
  <!-- <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet"> -->
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.2.1/css/all.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/blog/style.css">

<!-- 
  <link href="https://unpkg.com/@waline/client@v2/dist/waline.css" rel="stylesheet"> -->

  <script>
    // serif/sans-serif and iight/dark switch
	// Global

    var s="么舍台奸呼注欲复回为群万与丑专业丛东丝丢两严丧个丬丰临为丽举么义乌乐乔习乡书买乱争于亏云亘亚产亩亲亵亸亿仅从仑仓仪们价众优伙会伛伞伟传伤伥伦伧伪伫体余佣佥侠侣侥侦侧侨侩侪侬俣俦俨俩俪俭债倾偬偻偾偿傥傧储傩儿兑兖党兰关兴兹养兽冁内冈册写军农冢冯冲决况冻净凄凉凌减凑凛几凤凫凭凯击凼凿刍划刘则刚创删别刬刭刽刿剀剂剐剑剥剧劝办务劢动励劲劳势勋勐勚匀匦匮区医华协单卖卢卤卧卫却卺厂厅历厉压厌厍厕厢厣厦厨厩厮县参叆叇双发变叙叠叶号叹叽吁后吓吕吗吣吨听启吴呒呓呕呖呗员呙呛呜咏咔咙咛咝咤咴咸哌响哑哒哓哔哕哗哙哜哝哟唛唝唠唡唢唣唤唿啧啬啭啮啰啴啸喷喽喾嗫呵嗳嘘嘤嘱噜噼嚣嚯团园囱围囵国图圆圣圹场坂坏块坚坛坜坝坞坟坠垄垅垆垒垦垧垩垫垭垯垱垲垴埘埙埚埝埯堑堕塆墙壮声壳壶壸处备复够头夸夹夺奁奂奋奖奥妆妇妈妩妪妫姗姜娄娅娆娇娈娱娲娴婳婴婵婶媪嫒嫔嫱嬷孙学孪宁宝实宠审宪宫宽宾寝对寻导寿将尔尘尧尴尸尽层屃屉届属屡屦屿岁岂岖岗岘岙岚岛岭岳岽岿峃峄峡峣峤峥峦崂崃崄崭嵘嵚嵛嵝嵴巅巩巯币帅师帏帐帘帜带帧帮帱帻帼幂幞干并广庄庆庐庑库应庙庞废庼廪开异弃张弥弪弯弹强归当录彟彦彻径徕御忆忏忧忾怀态怂怃怄怅怆怜总怼怿恋恳恶恸恹恺恻恼恽悦悫悬悭悯惊惧惨惩惫惬惭惮惯愍愠愤愦愿慑慭憷懑懒懔戆戋戏戗战戬户扎扑扦执扩扪扫扬扰抚抛抟抠抡抢护报担拟拢拣拥拦拧拨择挂挚挛挜挝挞挟挠挡挢挣挤挥挦捞损捡换捣据捻掳掴掷掸掺掼揸揽揿搀搁搂搅携摄摅摆摇摈摊撄撑撵撷撸撺擞攒敌敛数斋斓斗斩断无旧时旷旸昙昼昽显晋晒晓晔晕晖暂暧札术朴机杀杂权条来杨杩杰极构枞枢枣枥枧枨枪枫枭柜柠柽栀栅标栈栉栊栋栌栎栏树栖样栾桊桠桡桢档桤桥桦桧桨桩梦梼梾检棂椁椟椠椤椭楼榄榇榈榉槚槛槟槠横樯樱橥橱橹橼檐檩欢欤欧歼殁殇残殒殓殚殡殴毁毂毕毙毡毵氇气氢氩氲汇汉污汤汹沓沟没沣沤沥沦沧沨沩沪沵泞泪泶泷泸泺泻泼泽泾洁洒洼浃浅浆浇浈浉浊测浍济浏浐浑浒浓浔浕涂涌涛涝涞涟涠涡涢涣涤润涧涨涩淀渊渌渍渎渐渑渔渖渗温游湾湿溃溅溆溇滗滚滞滟滠满滢滤滥滦滨滩滪漤潆潇潋潍潜潴澜濑濒灏灭灯灵灾灿炀炉炖炜炝点炼炽烁烂烃烛烟烦烧烨烩烫烬热焕焖焘煅煳熘爱爷牍牦牵牺犊犟状犷犸犹狈狍狝狞独狭狮狯狰狱狲猃猎猕猡猪猫猬献獭玑玙玚玛玮环现玱玺珉珏珐珑珰珲琎琏琐琼瑶瑷璇璎瓒瓮瓯电画畅畲畴疖疗疟疠疡疬疮疯疱疴痈痉痒痖痨痪痫痴瘅瘆瘗瘘瘪瘫瘾瘿癞癣癫癯皑皱皲盏盐监盖盗盘眍眦眬着睁睐睑瞒瞩矫矶矾矿砀码砖砗砚砜砺砻砾础硁硅硕硖硗硙硚确硷碍碛碜碱碹磙礼祎祢祯祷祸禀禄禅离秃秆种积称秽秾稆税稣稳穑穷窃窍窑窜窝窥窦窭竖竞笃笋笔笕笺笼笾筑筚筛筜筝筹签简箓箦箧箨箩箪箫篑篓篮篱簖籁籴类籼粜粝粤粪粮糁糇紧絷纟纠纡红纣纤纥约级纨纩纪纫纬纭纮纯纰纱纲纳纴纵纶纷纸纹纺纻纼纽纾线绀绁绂练组绅细织终绉绊绋绌绍绎经绐绑绒结绔绕绖绗绘给绚绛络绝绞统绠绡绢绣绤绥绦继绨绩绪绫绬续绮绯绰绱绲绳维绵绶绷绸绹绺绻综绽绾绿缀缁缂缃缄缅缆缇缈缉缊缋缌缍缎缏缐缑缒缓缔缕编缗缘缙缚缛缜缝缞缟缠缡缢缣缤缥缦缧缨缩缪缫缬缭缮缯缰缱缲缳缴缵罂网罗罚罢罴羁羟羡翘翙翚耢耧耸耻聂聋职聍联聩聪肃肠肤肷肾肿胀胁胆胜胧胨胪胫胶脉脍脏脐脑脓脔脚脱脶脸腊腌腘腭腻腼腽腾膑臜舆舣舰舱舻艰艳艹艺节芈芗芜芦苁苇苈苋苌苍苎苏苘苹茎茏茑茔茕茧荆荐荙荚荛荜荞荟荠荡荣荤荥荦荧荨荩荪荫荬荭荮药莅莜莱莲莳莴莶获莸莹莺莼萚萝萤营萦萧萨葱蒇蒉蒋蒌蓝蓟蓠蓣蓥蓦蔷蔹蔺蔼蕲蕴薮藁藓虏虑虚虫虬虮虽虾虿蚀蚁蚂蚕蚝蚬蛊蛎蛏蛮蛰蛱蛲蛳蛴蜕蜗蜡蝇蝈蝉蝎蝼蝾螀螨蟏衅衔补衬衮袄袅袆袜袭袯装裆裈裢裣裤裥褛褴襁襕见观觃规觅视觇览觉觊觋觌觍觎觏觐觑觞触觯詟誉誊讠计订讣认讥讦讧讨让讪讫训议讯记讱讲讳讴讵讶讷许讹论讻讼讽设访诀证诂诃评诅识诇诈诉诊诋诌词诎诏诐译诒诓诔试诖诗诘诙诚诛诜话诞诟诠诡询诣诤该详诧诨诩诪诫诬语诮误诰诱诲诳说诵诶请诸诹诺读诼诽课诿谀谁谂调谄谅谆谇谈谊谋谌谍谎谏谐谑谒谓谔谕谖谗谘谙谚谛谜谝谞谟谠谡谢谣谤谥谦谧谨谩谪谫谬谭谮谯谰谱谲谳谴谵谶谷豮贝贞负贠贡财责贤败账货质贩贪贫贬购贮贯贰贱贲贳贴贵贶贷贸费贺贻贼贽贾贿赀赁赂赃资赅赆赇赈赉赊赋赌赍赎赏赐赑赒赓赔赕赖赗赘赙赚赛赜赝赞赟赠赡赢赣赪赵赶趋趱趸跃跄跖跞践跶跷跸跹跻踊踌踪踬踯蹑蹒蹰蹿躏躜躯车轧轨轩轪轫转轭轮软轰轱轲轳轴轵轶轷轸轹轺轻轼载轾轿辀辁辂较辄辅辆辇辈辉辊辋辌辍辎辏辐辑辒输辔辕辖辗辘辙辚辞辩辫边辽达迁过迈运还这进远违连迟迩迳迹适选逊递逦逻遗遥邓邝邬邮邹邺邻郁郄郏郐郑郓郦郧郸酝酦酱酽酾酿释里鉅鉴銮錾钆钇针钉钊钋钌钍钎钏钐钑钒钓钔钕钖钗钘钙钚钛钝钞钟钠钡钢钣钤钥钦钧钨钩钪钫钬钭钮钯钰钱钲钳钴钵钶钷钸钹钺钻钼钽钾钿铀铁铂铃铄铅铆铈铉铊铋铍铎铏铐铑铒铕铗铘铙铚铛铜铝铞铟铠铡铢铣铤铥铦铧铨铪铫铬铭铮铯铰铱铲铳铴铵银铷铸铹铺铻铼铽链铿销锁锂锃锄锅锆锇锈锉锊锋锌锍锎锏锐锑锒锓锔锕锖锗错锚锜锞锟锠锡锢锣锤锥锦锨锩锫锬锭键锯锰锱锲锳锴锵锶锷锸锹锺锻锼锽锾锿镀镁镂镃镆镇镈镉镊镌镍镎镏镐镑镒镕镖镗镙镚镛镜镝镞镟镠镡镢镣镤镥镦镧镨镩镪镫镬镭镮镯镰镱镲镳镴镶长门闩闪闫闬闭问闯闰闱闲闳间闵闶闷闸闹闺闻闼闽闾闿阀阁阂阃阄阅阆阇阈阉阊阋阌阍阎阏阐阑阒阓阔阕阖阗阘阙阚阛队阳阴阵阶际陆陇陈陉陕陧陨险随隐隶隽难雏雠雳雾霁霉霭靓静靥鞑鞒鞯鞴韦韧韨韩韪韫韬韵页顶顷顸项顺须顼顽顾顿颀颁颂颃预颅领颇颈颉颊颋颌颍颎颏颐频颒颓颔颕颖颗题颙颚颛颜额颞颟颠颡颢颣颤颥颦颧风飏飐飑飒飓飔飕飖飗飘飙飚飞飨餍饤饥饦饧饨饩饪饫饬饭饮饯饰饱饲饳饴饵饶饷饸饹饺饻饼饽饾饿馀馁馂馃馄馅馆馇馈馉馊馋馌馍馎馏馐馑馒馓馔馕马驭驮驯驰驱驲驳驴驵驶驷驸驹驺驻驼驽驾驿骀骁骂骃骄骅骆骇骈骉骊骋验骍骎骏骐骑骒骓骔骕骖骗骘骙骚骛骜骝骞骟骠骡骢骣骤骥骦骧髅髋髌鬓魇魉鱼鱽鱾鱿鲀鲁鲂鲄鲅鲆鲇鲈鲉鲊鲋鲌鲍鲎鲏鲐鲑鲒鲓鲔鲕鲖鲗鲘鲙鲚鲛鲜鲝鲞鲟鲠鲡鲢鲣鲤鲥鲦鲧鲨鲩鲪鲫鲬鲭鲮鲯鲰鲱鲲鲳鲴鲵鲶鲷鲸鲹鲺鲻鲼鲽鲾鲿鳀鳁鳂鳃鳄鳅鳆鳇鳈鳉鳊鳋鳌鳍鳎鳏鳐鳑鳒鳓鳔鳕鳖鳗鳘鳙鳛鳜鳝鳞鳟鳠鳡鳢鳣鸟鸠鸡鸢鸣鸤鸥鸦鸧鸨鸩鸪鸫鸬鸭鸮鸯鸰鸱鸲鸳鸴鸵鸶鸷鸸鸹鸺鸻鸼鸽鸾鸿鹀鹁鹂鹃鹄鹅鹆鹇鹈鹉鹊鹋鹌鹍鹎鹏鹐鹑鹒鹓鹔鹕鹖鹗鹘鹚鹛鹜鹝鹞鹟鹠鹡鹢鹣鹤鹥鹦鹧鹨鹩鹪鹫鹬鹭鹯鹰鹱鹲鹳鹴鹾麦麸黄黉黡黩黪黾鼋鼌鼍鼗鼹齄齐齑齿龀龁龂龃龄龅龆龇龈龉龊龋龌龙龚龛龟志制咨只里系范松没尝尝闹面准钟别闲干尽脏拼";
 
    var t="麽捨臺姦唿註慾復迴爲羣萬與醜專業叢東絲丟兩嚴喪個爿豐臨為麗舉麼義烏樂喬習鄉書買亂爭於虧雲亙亞產畝親褻嚲億僅從侖倉儀們價眾優夥會傴傘偉傳傷倀倫傖偽佇體餘傭僉俠侶僥偵側僑儈儕儂俁儔儼倆儷儉債傾傯僂僨償儻儐儲儺兒兌兗黨蘭關興茲養獸囅內岡冊寫軍農塚馮衝決況凍淨淒涼淩減湊凜幾鳳鳧憑凱擊氹鑿芻劃劉則剛創刪別剗剄劊劌剴劑剮劍剝劇勸辦務勱動勵勁勞勢勳猛勩勻匭匱區醫華協單賣盧鹵臥衛卻巹廠廳曆厲壓厭厙廁廂厴廈廚廄廝縣參靉靆雙發變敘疊葉號歎嘰籲後嚇呂嗎唚噸聽啟吳嘸囈嘔嚦唄員咼嗆嗚詠哢嚨嚀噝吒噅鹹呱響啞噠嘵嗶噦嘩噲嚌噥喲嘜嗊嘮啢嗩唕喚呼嘖嗇囀齧囉嘽嘯噴嘍嚳囁嗬噯噓嚶囑嚕劈囂謔團園囪圍圇國圖圓聖壙場阪壞塊堅壇壢壩塢墳墜壟壟壚壘墾坰堊墊埡墶壋塏堖塒塤堝墊垵塹墮壪牆壯聲殼壺壼處備複夠頭誇夾奪奩奐奮獎奧妝婦媽嫵嫗媯姍薑婁婭嬈嬌孌娛媧嫻嫿嬰嬋嬸媼嬡嬪嬙嬤孫學孿寧寶實寵審憲宮寬賓寢對尋導壽將爾塵堯尷屍盡層屭屜屆屬屢屨嶼歲豈嶇崗峴嶴嵐島嶺嶽崠巋嶨嶧峽嶢嶠崢巒嶗崍嶮嶄嶸嶔崳嶁脊巔鞏巰幣帥師幃帳簾幟帶幀幫幬幘幗冪襆幹並廣莊慶廬廡庫應廟龐廢廎廩開異棄張彌弳彎彈強歸當錄彠彥徹徑徠禦憶懺憂愾懷態慫憮慪悵愴憐總懟懌戀懇惡慟懨愷惻惱惲悅愨懸慳憫驚懼慘懲憊愜慚憚慣湣慍憤憒願懾憖怵懣懶懍戇戔戲戧戰戩戶紮撲扡執擴捫掃揚擾撫拋摶摳掄搶護報擔擬攏揀擁攔擰撥擇掛摯攣掗撾撻挾撓擋撟掙擠揮撏撈損撿換搗據撚擄摑擲撣摻摜摣攬撳攙擱摟攪攜攝攄擺搖擯攤攖撐攆擷擼攛擻攢敵斂數齋斕鬥斬斷無舊時曠暘曇晝曨顯晉曬曉曄暈暉暫曖劄術樸機殺雜權條來楊榪傑極構樅樞棗櫪梘棖槍楓梟櫃檸檉梔柵標棧櫛櫳棟櫨櫟欄樹棲樣欒棬椏橈楨檔榿橋樺檜槳樁夢檮棶檢欞槨櫝槧欏橢樓欖櫬櫚櫸檟檻檳櫧橫檣櫻櫫櫥櫓櫞簷檁歡歟歐殲歿殤殘殞殮殫殯毆毀轂畢斃氈毿氌氣氫氬氳彙漢汙湯洶遝溝沒灃漚瀝淪滄渢溈滬濔濘淚澩瀧瀘濼瀉潑澤涇潔灑窪浹淺漿澆湞溮濁測澮濟瀏滻渾滸濃潯濜塗湧濤澇淶漣潿渦溳渙滌潤澗漲澀澱淵淥漬瀆漸澠漁瀋滲溫遊灣濕潰濺漵漊潷滾滯灩灄滿瀅濾濫灤濱灘澦濫瀠瀟瀲濰潛瀦瀾瀨瀕灝滅燈靈災燦煬爐燉煒熗點煉熾爍爛烴燭煙煩燒燁燴燙燼熱煥燜燾煆糊溜愛爺牘犛牽犧犢強狀獷獁猶狽麅獮獰獨狹獅獪猙獄猻獫獵獼玀豬貓蝟獻獺璣璵瑒瑪瑋環現瑲璽瑉玨琺瓏璫琿璡璉瑣瓊瑤璦璿瓔瓚甕甌電畫暢佘疇癤療瘧癘瘍鬁瘡瘋皰屙癰痙癢瘂癆瘓癇癡癉瘮瘞瘺癟癱癮癭癩癬癲臒皚皺皸盞鹽監蓋盜盤瞘眥矓著睜睞瞼瞞矚矯磯礬礦碭碼磚硨硯碸礪礱礫礎硜矽碩硤磽磑礄確鹼礙磧磣堿镟滾禮禕禰禎禱禍稟祿禪離禿稈種積稱穢穠穭稅穌穩穡窮竊竅窯竄窩窺竇窶豎競篤筍筆筧箋籠籩築篳篩簹箏籌簽簡籙簀篋籜籮簞簫簣簍籃籬籪籟糴類秈糶糲粵糞糧糝餱緊縶糸糾紆紅紂纖紇約級紈纊紀紉緯紜紘純紕紗綱納紝縱綸紛紙紋紡紵紖紐紓線紺絏紱練組紳細織終縐絆紼絀紹繹經紿綁絨結絝繞絰絎繪給絢絳絡絕絞統綆綃絹繡綌綏絛繼綈績緒綾緓續綺緋綽緔緄繩維綿綬繃綢綯綹綣綜綻綰綠綴緇緙緗緘緬纜緹緲緝縕繢緦綞緞緶線緱縋緩締縷編緡緣縉縛縟縝縫縗縞纏縭縊縑繽縹縵縲纓縮繆繅纈繚繕繒韁繾繰繯繳纘罌網羅罰罷羆羈羥羨翹翽翬耮耬聳恥聶聾職聹聯聵聰肅腸膚膁腎腫脹脅膽勝朧腖臚脛膠脈膾髒臍腦膿臠腳脫腡臉臘醃膕齶膩靦膃騰臏臢輿艤艦艙艫艱豔艸藝節羋薌蕪蘆蓯葦藶莧萇蒼苧蘇檾蘋莖蘢蔦塋煢繭荊薦薘莢蕘蓽蕎薈薺蕩榮葷滎犖熒蕁藎蓀蔭蕒葒葤藥蒞蓧萊蓮蒔萵薟獲蕕瑩鶯蓴蘀蘿螢營縈蕭薩蔥蕆蕢蔣蔞藍薊蘺蕷鎣驀薔蘞藺藹蘄蘊藪槁蘚虜慮虛蟲虯蟣雖蝦蠆蝕蟻螞蠶蠔蜆蠱蠣蟶蠻蟄蛺蟯螄蠐蛻蝸蠟蠅蟈蟬蠍螻蠑螿蟎蠨釁銜補襯袞襖嫋褘襪襲襏裝襠褌褳襝褲襇褸襤繈襴見觀覎規覓視覘覽覺覬覡覿覥覦覯覲覷觴觸觶讋譽謄訁計訂訃認譏訐訌討讓訕訖訓議訊記訒講諱謳詎訝訥許訛論訩訟諷設訪訣證詁訶評詛識詗詐訴診詆謅詞詘詔詖譯詒誆誄試詿詩詰詼誠誅詵話誕詬詮詭詢詣諍該詳詫諢詡譸誡誣語誚誤誥誘誨誑說誦誒請諸諏諾讀諑誹課諉諛誰諗調諂諒諄誶談誼謀諶諜謊諫諧謔謁謂諤諭諼讒諮諳諺諦謎諞諝謨讜謖謝謠謗諡謙謐謹謾謫譾謬譚譖譙讕譜譎讞譴譫讖穀豶貝貞負貟貢財責賢敗賬貨質販貪貧貶購貯貫貳賤賁貰貼貴貺貸貿費賀貽賊贄賈賄貲賃賂贓資賅贐賕賑賚賒賦賭齎贖賞賜贔賙賡賠賧賴賵贅賻賺賽賾贗讚贇贈贍贏贛赬趙趕趨趲躉躍蹌蹠躒踐躂蹺蹕躚躋踴躊蹤躓躑躡蹣躕躥躪躦軀車軋軌軒軑軔轉軛輪軟轟軲軻轤軸軹軼軤軫轢軺輕軾載輊轎輈輇輅較輒輔輛輦輩輝輥輞輬輟輜輳輻輯轀輸轡轅轄輾轆轍轔辭辯辮邊遼達遷過邁運還這進遠違連遲邇逕跡適選遜遞邐邏遺遙鄧鄺鄔郵鄒鄴鄰鬱郤郟鄶鄭鄆酈鄖鄲醞醱醬釅釃釀釋裏钜鑒鑾鏨釓釔針釘釗釙釕釷釺釧釤鈒釩釣鍆釹鍚釵鈃鈣鈈鈦鈍鈔鍾鈉鋇鋼鈑鈐鑰欽鈞鎢鉤鈧鈁鈥鈄鈕鈀鈺錢鉦鉗鈷缽鈳鉕鈽鈸鉞鑽鉬鉭鉀鈿鈾鐵鉑鈴鑠鉛鉚鈰鉉鉈鉍鈹鐸鉶銬銠鉺銪鋏鋣鐃銍鐺銅鋁銱銦鎧鍘銖銑鋌銩銛鏵銓鉿銚鉻銘錚銫鉸銥鏟銃鐋銨銀銣鑄鐒鋪鋙錸鋱鏈鏗銷鎖鋰鋥鋤鍋鋯鋨鏽銼鋝鋒鋅鋶鐦鐧銳銻鋃鋟鋦錒錆鍺錯錨錡錁錕錩錫錮鑼錘錐錦鍁錈錇錟錠鍵鋸錳錙鍥鍈鍇鏘鍶鍔鍤鍬鍾鍛鎪鍠鍰鎄鍍鎂鏤鎡鏌鎮鎛鎘鑷鐫鎳鎿鎦鎬鎊鎰鎔鏢鏜鏍鏰鏞鏡鏑鏃鏇鏐鐔钁鐐鏷鑥鐓鑭鐠鑹鏹鐙鑊鐳鐶鐲鐮鐿鑔鑣鑞鑲長門閂閃閆閈閉問闖閏闈閑閎間閔閌悶閘鬧閨聞闥閩閭闓閥閣閡閫鬮閱閬闍閾閹閶鬩閿閽閻閼闡闌闃闠闊闋闔闐闒闕闞闤隊陽陰陣階際陸隴陳陘陝隉隕險隨隱隸雋難雛讎靂霧霽黴靄靚靜靨韃鞽韉韝韋韌韍韓韙韞韜韻頁頂頃頇項順須頊頑顧頓頎頒頌頏預顱領頗頸頡頰頲頜潁熲頦頤頻頮頹頷頴穎顆題顒顎顓顏額顳顢顛顙顥纇顫顬顰顴風颺颭颮颯颶颸颼颻飀飄飆飆飛饗饜飣饑飥餳飩餼飪飫飭飯飲餞飾飽飼飿飴餌饒餉餄餎餃餏餅餑餖餓餘餒餕餜餛餡館餷饋餶餿饞饁饃餺餾饈饉饅饊饌饢馬馭馱馴馳驅馹駁驢駔駛駟駙駒騶駐駝駑駕驛駘驍罵駰驕驊駱駭駢驫驪騁驗騂駸駿騏騎騍騅騌驌驂騙騭騤騷騖驁騮騫騸驃騾驄驏驟驥驦驤髏髖髕鬢魘魎魚魛魢魷魨魯魴魺鮁鮃鯰鱸鮋鮓鮒鮊鮑鱟鮍鮐鮭鮚鮳鮪鮞鮦鰂鮜鱠鱭鮫鮮鮺鯗鱘鯁鱺鰱鰹鯉鰣鰷鯀鯊鯇鮶鯽鯒鯖鯪鯕鯫鯡鯤鯧鯝鯢鯰鯛鯨鯵鯴鯔鱝鰈鰏鱨鯷鰮鰃鰓鱷鰍鰒鰉鰁鱂鯿鰠鼇鰭鰨鰥鰩鰟鰜鰳鰾鱈鱉鰻鰵鱅鰼鱖鱔鱗鱒鱯鱤鱧鱣鳥鳩雞鳶鳴鳲鷗鴉鶬鴇鴆鴣鶇鸕鴨鴞鴦鴒鴟鴝鴛鴬鴕鷥鷙鴯鴰鵂鴴鵃鴿鸞鴻鵐鵓鸝鵑鵠鵝鵒鷳鵜鵡鵲鶓鵪鶤鵯鵬鵮鶉鶊鵷鷫鶘鶡鶚鶻鶿鶥鶩鷊鷂鶲鶹鶺鷁鶼鶴鷖鸚鷓鷚鷯鷦鷲鷸鷺鸇鷹鸌鸏鸛鸘鹺麥麩黃黌黶黷黲黽黿鼂鼉鞀鼴齇齊齏齒齔齕齗齟齡齙齠齜齦齬齪齲齷龍龔龕龜誌製谘隻裡係範鬆冇嚐嘗鬨麵準鐘彆閒乾儘臟拚";
 
   String.prototype.t2s = function() {
       
        var k='';
        for(var i=0;i<this.length;i++) k+=(t.indexOf(this.charAt(i))==-1)?this.charAt(i):s.charAt(t.indexOf(this.charAt(i)))
        return k;
   }
 
   function t2s() {
       document.body.innerHTML = document.body.innerHTML.t2s();
   }
	function swapCover(if_dark) {
		if ($('a.post-link')) {
			$('a.post-link').each(function() {
				if ($(this).attr('data-bg')) {
					let bg = $(this).attr('data-bg');
					if (if_dark) {
						$(this).css('background', 'unset');
						$(this).parent('.post-item').css('background', `linear-gradient(rgba(20, 20, 20, 0.8), rgba(0, 0, 0, 0.8)), url(${bg}) no-repeat 0% 20%/ cover`);
					} else {
						$(this).parent('.post-item').css('background', `linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)), url(${bg}) no-repeat 0% 20%/ cover`)
					}
				}
			})
		}
	}
	// Initialize
	let html = document.querySelector('html');
	if (sessionStorage.getItem('dark') === '1') {
		html.classList.add('dark-mode');
	} else if (sessionStorage.getItem('dark') === '0') {
		html.classList.remove('dark-mode');
	} else if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
		html.classList.add('dark-mode');
	} else {
		html.classList.remove('dark-mode');
	}
  document.addEventListener('DOMContentLoaded', function () {
	swapCover($('html').hasClass('dark-mode'));
	// Buttons

	if (localStorage.getItem('trd') === '1') {
		html.classList.add('trd');
	} else if (localStorage.getItem('trd') === '0') {
		html.classList.remove('trd');
		t2s();
	}

	$('.font-type-btn').click(function() {
		$('html').toggleClass('trd');
		let if_trd = $('html').hasClass('trd');
		if (if_trd) {
			localStorage.setItem('trd', '1');
			location.reload();
		} else {
			t2s();
			localStorage.setItem('trd', '0');
		}
	})

	$('.dark-mode-btn').click(function() {
		$('html').toggleClass('dark-mode');
		let if_dark = $('html').hasClass('dark-mode');
		if (if_dark) {
			sessionStorage.setItem('dark', '1');
		} else {
			sessionStorage.setItem('dark', '0');
		}
		swapCover(if_dark);
	})
  })
  </script>


<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/blog/atom.xml" title="牙子集" type="application/atom+xml">
</head>

<body>
  <div class="site-wrapper is_post_page">
    <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<script>document.getElementById("loading-bar").style.width="20%";</script>

<header id="header" class="site-header clearfix">

  <a class="logo square clearfix" href="/blog/">
    <!-- 
      Replace with your own size name, for example:
      <span class="b">A</span>
      <span class="w">B</span>
      <span class="b">C</span>
     -->
    
      <span class="b css30ab1114911fd90">
        牙
      </span>
    
      <span class="w css30ab1114911fd90">
        子
      </span>
    
      <span class="b css30ab1114911fd90">
        集
      </span>
    
  </a>
  <a class="me square clearfix">
    <span class="b dark-mode-btn">
    	<i class="fa fa-lightbulb"></i>
    </span>
    <span class="b font-type-btn">
    	<sup>简</sup><sub>繁</sub>
    </span>
    <!--<span class="b font-type-btn">
    	<i class="fa fa-font"></i>
    </span>-->
    <span class="b site-nav-switch">
    	<i class="fa fa-bars"></i>
    </span>
  </a>


</header>

    <script>document.getElementById("loading-bar").style.width="40%";</script>
    <main id="main" class="clearfix">
      <div class="cover"></div><img class="cover" src="https://s2.loli.net/2022/07/16/vH8waZpL6UjzVuY.png" />
<article id="post-dark-mode"
  class="article white-box article-type-post"
  itemscope itemprop="blogPost">

  <header class="article-header">
    <h1 class="article-title" itemprop="name">
      為 Hexo 靜態博客添加夜間模式
      
    </h1>
    <div class="article-meta">
      <time class="article-time" dateshort="Sat Jul 16 2022 00:00:00 GMT+0800" datetime="2022-07-15T16:00:00.000Z" itemprop="datePublished">
        
			二〇二二年仲夏
			
      </time>
      
      · <time class="article-time" dateshort="Sat Jul 16 2022 00:00:00 GMT+0800" datetime="2023-02-02T16:00:00.000Z" itemprop="dateUpdated">
        
			二〇二三年季冬
			
      </time>
      
    </div>
  </header>

  <div class="article-entry" itemprop="articleBody">
    <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>這兩天重新拾起博客，本來說是想改用<a href="https://meow.c-3.moe/" target="_blank" rel="noopener">劉曉義</a>的系統的，可瞅一眼覺得 element 主題還是很有設計感，乾脆又折騰起了主題，並震驚地發現本以為棄坑的原主題作者 Art Chen 在 2020 年竟然<a href="https://artifact.me/dark-mode-is-cool/" target="_blank" rel="noopener">更新了暗黑模式</a>，自己也覺得總白一片在黑夜中確實不太好，就打算搭載上夜間模式。本站的夜間模式隨時間改變，並且可在右上角切換。</p>
<p>本文以此為契機，簡述為 Hexo 靜態博客添加夜間模式的通用指南。本文要求讀者有一定 CSS 和 JavaScript 能力，或者擅於查詢 <a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener">MDN</a> 現學現賣。</p>
<h2 id="方法的取捨"><a href="#方法的取捨" class="headerlink" title="方法的取捨"></a>方法的取捨</h2><p>近年，CSS 普遍支持了 <code>prefers-color-scheme</code> 的媒體查詢（Media queries）。兼容性請參考 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="noopener">MDN</a>，一如既往，除了 IE 都沒問題。</p>
<p><code>prefers-color-scheme</code> 這個媒體特性與夜間模式密切相關，它有三種可選值：<code>no-preference</code>、<code>light</code>、<code>dark</code>。也就是說，我們完全可以通過媒體查詢實現夜間模式。例如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">prefers-color-scheme:</span> dark) &#123;</span><br><span class="line">    <span class="selector-tag">html</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="number">#000</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然而，這種方法存在問題，即夜間模式的顯示只能跟隨系統，如果訪問者未設置系統夜間模式，將永遠無法看到夜間模式。因此，我推薦想要設置的人採用為 <code>html</code> 添加 <code>dark</code> class 的方法。不過，這並不意味著我們完全不會用到 <code>prefers-color-scheme</code>，這一點請看後文。</p>
<h2 id="書寫-CSS"><a href="#書寫-CSS" class="headerlink" title="書寫 CSS"></a>書寫 CSS</h2><p>夜間模式和一般模式最大的區別，顯然在於顏色。最簡單的實現方法即將淺色全部替換為深色。如果僅是如此，反色是很好的思路，相應的 CSS 書寫也非常簡單：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span><span class="selector-class">.dark</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">invert</span>(<span class="number">1</span>) <span class="built_in">hue-rotate</span>(<span class="number">180deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>唯一的問題在於，此種方法會把圖片也反色。解決方法也簡單粗暴，再加一行：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dark</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">invert</span>(<span class="number">1</span>) <span class="built_in">hue-rotate</span>(<span class="number">180deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>把圖片再反色一次反回原色即可。</p>
<p>即便如此，以上方法還是存在問題：</p>
<ul>
<li>對許多硬寫入樣式表的顏色無效，往往做不到完全反色</li>
<li>如果設置了博客主題色，將喪失主題色</li>
<li>夜間模式不僅僅是顏色的變化，缺乏細節的補完</li>
</ul>
<p>因此，這裡建議單獨寫一段 CSS 來實現夜間模式。查看原主題的樣式表文件，尋找需要修改的部分，將這些代碼複製並修改為期望的內容。</p>
<p>除了顏色變暗和個性化的夜間模式設計，我想提醒一下修改圖片亮度，避免一片暗黑中出現亮度超標的圖片。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dark</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">0.7</span>);</span><br><span class="line">            <span class="attribute">transition</span>: filter <span class="number">300ms</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.dark</span> <span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">filter</span>: <span class="built_in">brightness</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>對於顏色，除了複製並修改的土辦法，如果原主題在 <code>html</code> 或 <code>html</code> 定義了所有顏色，可以在顏色定義處更方便地修改。例如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">--bg-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">--text-color</span>: <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span><span class="selector-class">.dark</span> &#123;</span><br><span class="line">    <span class="attribute">--base-color</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">--text-color</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>將修改後的代碼放在總樣式表文件中。</p>
<h2 id="書寫-JavaScript"><a href="#書寫-JavaScript" class="headerlink" title="書寫 JavaScript"></a>書寫 JavaScript</h2><p>使用 <code>dark</code> class 的方法後，通過添加或刪去 <code>dark</code> class 即可實現進入或退出夜間模式。鑑於大部分主題都有使用 jQuery，這裡展示相應的 jQuery 代碼讓過程更加簡單：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'html'</span>).toggleClass(<span class="string">'dark'</span>);</span><br></pre></td></tr></table></figure>
<p>如果你的主題沒有使用 jQuery，可以自行查找原生 JavaScript 的等價寫法或在主題裡加入 jQuery，因為後文均是在使用 jQuery 的前提下書寫的。</p>
<p>找個地方放上按鈕：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:"</span> <span class="attr">class</span>=<span class="string">"swap-mode-btn"</span>&gt;</span>切換夜間模式<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再搭載切換功能：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.swap-mode-btn'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'html'</span>).toggleClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>不過，現在還有一點問題，就是每次進入新頁面或者刷新的時候，又會返回普通模式。此時，只要藉助 localStorage 記錄上次的選擇就行了：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判斷部分</span></span><br><span class="line"><span class="comment">// 插入在 &lt;body&gt; 前的 &lt;head&gt; 中以在頁面加載之前判斷模式，避免在夜間中跳出白色閃瞎訪客</span></span><br><span class="line"><span class="comment">// 注意：此處 DOM 尚未加載完畢，不能使用外部引入的 jQuery</span></span><br><span class="line"><span class="keyword">let</span> html = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'html'</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> (localStorage.getItem(<span class="string">'dark'</span>) === <span class="string">'1'</span>) &#123;</span><br><span class="line">	html.classList.add(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (localStorage.getItem(<span class="string">'dark'</span>) === <span class="string">'0'</span>) &#123;</span><br><span class="line">	html.classList.remove(<span class="string">'dark'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按鈕設置部分</span></span><br><span class="line">$(<span class="string">'.swap-mode-btn'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(<span class="string">'html'</span>).toggleClass(<span class="string">'dark'</span>);</span><br><span class="line">    <span class="keyword">let</span> if_dark = $(<span class="string">'html'</span>).hasClass(<span class="string">'dark'</span>);</span><br><span class="line">	<span class="keyword">if</span> (if_dark) &#123;</span><br><span class="line">		localStorage.setItem(<span class="string">'dark'</span>, <span class="string">'1'</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		localStorage.setItem(<span class="string">'dark'</span>, <span class="string">'0'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>使用 localStorage 會讓訪客下次進入博客時仍採用上次的模式。如果要在下次進入時回到默認狀態，請改為 sessionStorage。</p>
<p>改為 sessionStorage 後需注意，在新標籤頁打開的同站點頁面（子頁面）中修改模式，其改變的 sessionStorage 不會在父頁面中使用。這是 sessionStorage 本身的特性，可以通過一些技巧避免，本文就不贅述了。</p>
<p>完事！如果只需要自由切換的話，本文到此結束。</p>
<h2 id="隨系統切換"><a href="#隨系統切換" class="headerlink" title="隨系統切換"></a>隨系統切換</h2><p>即便選擇了添加 <code>dark</code> class 的方法，我們仍然能實現隨系統切換，而所需的工具不是 CSS，而是 JavaScript。同樣藉助 <code>prefers-color-scheme</code>，但這次是用 JavaScript 查詢判斷：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.matchMedia(<span class="string">'(prefers-color-scheme: dark)'</span>).matches) &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).addClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).removeClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="隨時間切換"><a href="#隨時間切換" class="headerlink" title="隨時間切換"></a>隨時間切換</h2><p>使用 JavaScript 相比直接用 CSS，除了能自由切換，還有一個優點是能無視系統設置，隨時間切換，同樣，將判斷條件改為時間即可。例如，設置下午七點到次日六點為夜間模式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &gt;= <span class="number">19</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).addClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $(<span class="string">'html'</span>).removeClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="多種切換方式的優先級處理"><a href="#多種切換方式的優先級處理" class="headerlink" title="多種切換方式的優先級處理"></a>多種切換方式的優先級處理</h2><p>有了多種判斷條件，就能夠給它們排個優先級了。比如，我想要先看看訪客之前是否手動切換成了某模式，如果有就保持該模式，沒有就根據時間：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> html = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'html'</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> (localStorage.getItem(<span class="string">'dark'</span>) === <span class="string">'1'</span>) &#123;</span><br><span class="line">	html.classList.add(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (localStorage.getItem(<span class="string">'dark'</span>) === <span class="string">'0'</span>) &#123;</span><br><span class="line">	html.classList.remove(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &gt;= <span class="number">19</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">	html.classList.add(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	html.classList.remove(<span class="string">'dark'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果要添加讓選擇過模式的訪客繼續根據時間自動切換模式的按鈕，按鈕需要先檢測目前時間切換模式，之後清除上述 localStorage：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'.sys-dark-btn'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &gt;= <span class="number">19</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">		$(<span class="string">'html'</span>).addClass(<span class="string">'dark'</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		$(<span class="string">'html'</span>).removeClass(<span class="string">'dark'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	localStorage.removeItem(<span class="string">'dark'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>那麼，需要添加的全站 JavaScript 內容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;head&gt;&lt;script&gt;</span></span><br><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="keyword">if</span> (localStorage.getItem(<span class="string">'dark'</span>) === <span class="string">'1'</span>) &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).addClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (localStorage.getItem(<span class="string">'dark'</span>) === <span class="string">'0'</span>) &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).removeClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &gt;= <span class="number">19</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).addClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	$(<span class="string">'html'</span>).removeClass(<span class="string">'dark'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// DOM 加載完後方可執行</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 按鈕設置</span></span><br><span class="line">	$(<span class="string">'.sys-dark-btn'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &gt;= <span class="number">19</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours() &lt; <span class="number">6</span>) &#123;</span><br><span class="line">			$(<span class="string">'html'</span>).addClass(<span class="string">'dark'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			$(<span class="string">'html'</span>).removeClass(<span class="string">'dark'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		localStorage.removeItem(<span class="string">'dark'</span>);</span><br><span class="line">	&#125;)</span><br><span class="line">	$(<span class="string">'.dark-btn'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		$(<span class="string">'html'</span>).toggleClass(<span class="string">'dark'</span>);</span><br><span class="line">		<span class="keyword">let</span> if_dark = $(<span class="string">'html'</span>).hasClass(<span class="string">'dark'</span>);</span><br><span class="line">		<span class="keyword">if</span> (if_dark) &#123;</span><br><span class="line">			localStorage.setItem(<span class="string">'dark'</span>, <span class="string">'1'</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			localStorage.setItem(<span class="string">'dark'</span>, <span class="string">'0'</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// &lt;/script&gt;&lt;/head&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="默認夜間"><a href="#默認夜間" class="headerlink" title="默認夜間"></a>默認夜間</h2><p>默認夜間的相反即是手動選擇日間模式。因此，想要默認夜間的話，只要在上述書寫 CSS 階段把原代碼和修改後代碼的選擇器調換位置即可。</p>

  </div>
  
  <div class="article-tags">
    
      <a class="tag-link" href="/blog/tags/%E7%9E%8E%E6%8A%98%E9%A8%B0/" rel="tag">瞎折騰</a><a class="tag-link" href="/blog/tags/%E7%B6%B2%E7%AB%99/" rel="tag">網站</a>
    
  </div>

  
  <section id="comments" class="white-box">
    
	</section>
	
<!-- 
  <section id="comments" class="white-box"></section>
  <script type="module">
    import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

    init({
      el: '#comments',
      serverURL: 'https://waline-1nneyg3oq-inchei.vercel.app/',
    });
  </script>   -->

</article>

<nav id="page-nav">
    <a href="/blog/2022/06/18/terrible-poems/">‹ 爛詩幾首</a>
    <a href="/blog/2022/07/24/flowers/">在夏日結緣 ›</a>
</nav>

      <script>document.getElementById("loading-bar").style.width="60%";</script>
    </main>
    
<footer id="footer" class="clearfix">
	
  <div>&copy; <a href="https://inchei.github.io">牙子集</a> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a><a class="rss" href="/blog/atom.xml" title="訂閱 RSS"><i class="fa fa-rss"></i></a></div>
  <div>主題修改自 <a href="http://artifact.me/" target="_blank">Art Chen</a> 由 <a href="https://hexo.io/" target="_blank" rel="external noopener">Hexo</a> 驅動.</div>
</footer>


    <script>document.getElementById("loading-bar").style.width="80%";</script>
    <div class="overlay"></div>
  </div>
  <div class="site-sidebar">

	
	
	<div class="sidebar-switch clearfix show"
		style="display: block">
	  <a class="dark-btn active" data-toggle="toc">
		<i class="fa fa-list"></i>
	    <span class="text">目錄</span>
	  </a>
	  <a class="dark-btn" data-toggle="bio">
	    <i class="fa fa-user"></i>
	    <span class="text">關於</span>
	  </a>
	</div>

	<div class="site-toc show"
		style="display: block">
		
	  	<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法的取捨"><span class="toc-number">2.</span> <span class="toc-text">方法的取捨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#書寫-CSS"><span class="toc-number">3.</span> <span class="toc-text">書寫 CSS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#書寫-JavaScript"><span class="toc-number">4.</span> <span class="toc-text">書寫 JavaScript</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隨系統切換"><span class="toc-number">5.</span> <span class="toc-text">隨系統切換</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隨時間切換"><span class="toc-number">6.</span> <span class="toc-text">隨時間切換</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多種切換方式的優先級處理"><span class="toc-number">7.</span> <span class="toc-text">多種切換方式的優先級處理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#默認夜間"><span class="toc-number">8.</span> <span class="toc-text">默認夜間</span></a></li></ol>
	  
  </div>
  
	<div class="site-bio "
		style="display: none">
		
	  <!-- About Me -->
	  <div class="about-me clearfix">
	    <div class="avatar">
	      <img src="/blog/img/avatar.jpg" />
	    </div>
	    <div class="info">
	      <a class="name dark-btn" href="/blog/about">
	        茵陳
	      </a>
	    </div>
	    <div class="info">
	      <span class="item desc">
	        热爱生活、闭嘴與死亡
	      </span>
	    </div>
	  </div>
	
	  <!-- Blog Icons -->
	  <!-- <div class="social clearfix">
		<a class="feed" href="/blog/atom.xml" title="訂閱 RSS">
			<i class="fa fa-rss"></i>
		</a>
	  </div> -->

	  <!-- Links -->
	  <div class="links show clearfix">
		
			<span class="title">友情鏈接</span><ol>
			
			 <li><a href="http://im.dimpurr.com/"
			   target="_blank" rel="external" data-description="很久沒有動靜的北郵大佬">
			   釘子
			 </a></li>
		   
			 <li><a href="https://ttsuxx.cc"
			   target="_blank" rel="external" data-description="大我一屆的可愛班友">
			   Ttsuxx
			 </a></li>
		   
			 <li><a href="https://csworldlet.top"
			   target="_blank" rel="external" data-description="一位班友">
			   Chatseeon的小世界
			 </a></li>
		   
			 <li><a href="http://kumokasumi.lofter.com/"
			   target="_blank" rel="external" data-description="车万人，萌百行政員">
			   雲霞
			 </a></li>
		   
			 <li><a href="https://hibikilogy.github.io"
			   target="_blank" rel="external" data-description="京吹學報">
			   中国吹學院
			 </a></li>
		   
			</ol>
		 
	  </div>
	
	  <!-- Home & Bottom
	  <div class="shortcuts clearfix">
	    <div class="bk">
	      <a href="#header" class="dark-btn window-nav">
	        <span class="icon icon-chevron-thin-up"></span>
	        <span class="text">頂部</span>
	      </a>
	    </div>
	    <div class="bk">
	      <a href="#footer" class="dark-btn window-nav">
	        <span class="icon icon-chevron-thin-down"></span>
	        <span class="text">底部</span>
	      </a>
	    </div>
	  </div>-->

	</div>

</div>

  <!-- Universal Search -->

<script type="text/javascript">
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
</script>

<script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/blog/js/jquery.js"><\/script>')</script>

<!-- Fancybox -->
<link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
<script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<script>
$(document).ready(function() {
 wrapImageWithFancyBox();
 $('article img').not('img.emoticon').each(function() {
  $(this).wrap('<center></center>');
  $(this).after('<div class="caption">' + $(this).attr('alt') + '</div>');
 })
});

/**
* Wrap images with fancybox support.
*/
function wrapImageWithFancyBox() {
 $('article img').not('img.emoticon').each(function() {
     var $image = $(this);
     var imageCaption = $image.attr('alt');
     var $imageWrapLink = $image.parent('a');

     if ($imageWrapLink.size() < 1) {
         var src = this.getAttribute('src');
         var idx = src.lastIndexOf('?');
         if (idx != -1) {
             src = src.substring(0, idx);
         }
         $imageWrapLink = $image.wrap('<a href="' + src + '"></a>').parent('a');
     }

     $imageWrapLink.attr('data-fancybox', 'images');
     if (imageCaption) {
         $imageWrapLink.attr('data-caption', imageCaption);
     }

 });

 $().fancybox({
     selector: '[data-fancybox="images"]',
     thumbs: false,
     hash: true,
     loop: false,
     fullScreen: false,
     slideShow: false,
     protect: true,
 });
}
</script>


<script src="/blog/js/search.js"></script>


<script src="/blog/js/app.js"></script>


<!-- Disqus -->



<!-- Valine -->

<!-- <script src="//unpkg.com/leancloud-storage@3.0.4/dist/av-min.js"></script> -->
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/valine/1.4.5/Valine.min.js"></script>
<script type="text/javascript">
  var GUEST = ['nick','mail','link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function (item) {
    return GUEST.indexOf(item)>-1;
  });
  new Valine({
    el: '#comments' ,
    appId: 'L5I3HG62SmVaOIw0T3M2UOn3-gzGzoHsz',
    appKey: 'yna3y5hhjviSuwNcJVYQcjFz',
    placeholder: '歡迎評論| ω・´)表情系統是 bangumi 的！很抱歉，由於沒有獨立域名，郵件通知系統在一些時間段可能無法使用',
    avatar:'retro',
    lang:'zh-TW',
    meta: guest,
    pageSize: 10 || 10,
    visitor: false,
    emojiCDN: '//bgm.tv/img/smiles/tv/',
    emojiMaps: {
      "bgm24": "01.gif","bgm25": "02.gif","bgm26": "03.gif","bgm27": "04.gif","bgm28": "05.gif","bgm29": "06.gif","bgm30": "07.gif","bgm31": "08.gif","bgm32": "09.gif","bgm33": "10.gif","bgm34": "11.gif","bgm35": "12.gif","bgm36": "13.gif","bgm37": "14.gif","bgm38": "15.gif","bgm39": "16.gif","bgm40": "17.gif","bgm41": "18.gif","bgm42": "19.gif","bgm43": "20.gif","bgm44": "21.gif","bgm45": "22.gif","bgm46": "23.gif","bgm47": "24.gif","bgm48": "25.gif","bgm49": "26.gif","bgm50": "27.gif","bgm51": "28.gif","bgm52": "29.gif","bgm53": "30.gif","bgm54": "31.gif","bgm55": "32.gif","bgm56": "33.gif","bgm57": "34.gif","bgm58": "35.gif","bgm59": "36.gif","bgm60": "37.gif","bgm61": "38.gif","bgm62": "39.gif","bgm63": "40.gif","bgm64": "41.gif","bgm65": "42.gif","bgm66": "43.gif","bgm67": "44.gif","bgm68": "45.gif","bgm69": "46.gif","bgm70": "47.gif","bgm71": "48.gif","bgm72": "49.gif","bgm73": "50.gif","bgm74": "51.gif","bgm75": "52.gif","bgm76": "53.gif","bgm77": "54.gif","bgm78": "55.gif","bgm79": "56.gif","bgm80": "57.gif","bgm81": "58.gif","bgm82": "59.gif","bgm83": "60.gif","bgm84": "61.gif","bgm85": "62.gif","bgm86": "63.gif","bgm87": "64.gif","bgm88": "65.gif","bgm89": "66.gif","bgm90": "67.gif","bgm91": "68.gif","bgm92": "69.gif","bgm93": "70.gif","bgm94": "71.gif","bgm95": "72.gif","bgm96": "73.gif","bgm97": "74.gif","bgm98": "75.gif","bgm99": "76.gif","bgm100": "77.gif","bgm101": "78.gif","bgm102": "79.gif","bgm103": "80.gif","bgm104": "81.gif","bgm105": "82.gif","bgm106": "83.gif","bgm107": "84.gif","bgm108": "85.gif","bgm109": "86.gif","bgm110": "87.gif","bgm111": "88.gif","bgm112": "89.gif","bgm113": "90.gif","bgm114": "91.gif","bgm115": "92.gif","bgm116": "93.gif","bgm117": "94.gif","bgm118": "95.gif","bgm119": "96.gif","bgm120": "97.gif","bgm121": "98.gif","bgm122": "99.gif","bgm123": "100.gif",
    }
  });
</script>


<!-- Swiftype -->
<!-- Please replace with your own swiftype settings -->
<!--
<script type="text/javascript">
  /* Swiftype */
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','FHMeAyBdVccJECstf-XJ','2.0.0');
</script>
-->

  <script>document.getElementById("loading-bar").style.width="100%";</script>
</body>
</html>
